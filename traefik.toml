defaultEntryPoints = ["http","https"]
RootCAs = [ "/certs/ca.pem" ]

[entryPoints]
  [entryPoints.http]
  address = ":80"
    [entryPoints.http.redirect]
      entryPoint = "https"
  [entryPoints.https]
  address = ":443"
    [entryPoints.https.tls]
      [[entryPoints.https.tls.certificates]]
      CertFile = "/certs/traefik.pem"
      KeyFile = "/certs/traefik-key.pem"

[web]
address = ":8080"

[file]

[backends]
  [backends.localauth]
    [backends.localauth.servers.server1]
    url = "https://localAuth"

  [backends.localauthMetrics]
    [backends.localauthMetrics.servers.server1]
    url = "http://localAuth:9090"

  [backends.localstorage]
    [backends.localstorage.servers.server1]
    url = "https://localStorage"

  [backends.cloudauth]
    [backends.cloudauth.servers.server1]
    url = "https://cloudAuth"
    weight = 10

  [backends.localstorageMetrics]
    [backends.localstorageMetrics.servers.server1]
    url = "http://localStorage:9090"

  [backends.localMinio]
    [backends.localMinio.servers.server1]
    url = "https://localMinio:9000"

  [backends.cloudstorage]
    [backends.cloudstorage.servers.server1]
    url = "https://cloudStorage"

  [backends.cloudtorageMetrics]
    [backends.cloudstorageMetrics.servers.server1]
    url = "http://cloudStorage:9090"

  [backends.cloudMinio]
    [backends.cloudMinio.servers.server1]
    url = "https://cloudMinio:9000"

  [backends.vaultui]
    [backends.vaultui.servers.server1]
    url = "http://vaultui:8000"

  [backends.localNats]
    [backends.localNats.servers.server1]
    url = "http://localNats:4242"

  [backends.localNatsMonitor]
    [backends.localNatsMonitor.servers.server1]
    url = "http://localNats:8282"

  [backends.localPrometheus]
    [backends.localPrometheus.servers.server1]
    url = "http://localPrometheus:9090"

  [backends.cloudPrometheus]
    [backends.cloudPrometheus.servers.server1]
    url = "http://cloudPrometheus:9090"

  [backends.natsStreamingExporter]
    [backends.natsStreamingExporter.servers.server1]
    url = "http://natsStreamingExporter:9275"

[frontends]
  [frontends.localauth]
  backend = "localauth"
    [frontends.localauth.routes.route1]
    rule = "Host:iryo.local;PathPrefix:/auth"

  [frontends.localauthMetrics]
  backend = "localauthMetrics"
    [frontends.localauthMetrics.routes.route1]
    rule = "Host:iryo.local;PathPrefix:/auth/metrics"

  [frontends.localstorage]
  backend = "localstorage"
    [frontends.localstorage.routes.route1]
    rule = "Host:iryo.local;PathPrefix:/storage"

  [frontends.cloudauth]
  backend = "cloudauth"
    [frontends.cloudauth.routes.route1]
    rule = "Host:iryo.cloud;PathPrefix:/auth"

  [frontends.localstorageMetrics]
  backend = "localstorageMetrics"
    [frontends.localstorageMetrics.routes.route1]
    rule = "Host:iryo.local;PathPrefix:/storage/metrics"

  [frontends.localMinio]
  backend = "localMinio"
    [frontends.localMinio.routes.route1]
    rule = "Host:minio.iryo.local"

  [frontends.cloudstorage]
  backend = "cloudstorage"
    [frontends.cloudstorage.routes.route1]
    rule = "Host:iryo.cloud;PathPrefix:/storage"

  [frontends.cloudstorageMetrics]
  backend = "cloudstorageMetrics"
    [frontends.cloudstorageMetrics.routes.route1]
    rule = "Host:iryo.cloud;PathPrefix:/storage/metrics"

  [frontends.cloudMinio]
  backend = "cloudMinio"
    [frontends.cloudMinio.routes.route1]
    rule = "Host:minio.iryo.cloud"

  [frontends.vaultui]
  backend = "vaultui"
    [frontends.vaultui.routes.route1]
    rule = "Host:vault.iryo.local"

  [frontends.localNats]
  backend = "localNats"
    [frontends.localNats.routes.route1]
    rule = "Host:nats.iryo.local"

  [frontends.localNatsMonitor]
  backend = "localNatsMonitor"
    [frontends.localNatsMonitor.routes.route1]
    rule = "Host:nats-monitor.iryo.local"

  [frontends.localPrometheus]
  backend = "localPrometheus"
    [frontends.localPrometheus.routes.route1]
    rule = "Host:prometheus.iryo.local"

  [frontends.cloudPrometheus]
  backend = "cloudPrometheus"
    [frontends.cloudPrometheus.routes.route1]
    rule = "Host:prometheus.iryo.cloud"
